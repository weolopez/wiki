!function(e,t){"use strict";e.module("jett.ionic.scroll.sista",["ionic"]).directive("scrollSista",["$document","$timeout","$ionicScrollDelegate",function(a,n,o){var r=400,i=2*r,c=r+"ms",s=t.Platform.isAndroid()?!1:!0;return{restrict:"A",link:function(r,l,u){function d(e,a,o){o&&!e.style[t.CSS.TRANSITION_DURATION]&&(e.style[t.CSS.TRANSITION_DURATION]=o,n(function(){e.style[t.CSS.TRANSITION_DURATION]=""},i,!1)),e.style[t.CSS.TRANSFORM]="translate3d(0, "+-a+"px, 0)"}function f(){m=0,y=0,p=0}function S(){if(N=C.querySelector('[nav-bar="cached"] .bar-header'),T=C.querySelector('[nav-bar="active"] .bar-header'))switch(v=T.offsetHeight,A=v,R=C.querySelector(".tabs"),R&&(I=R.offsetHeight,R.parentNode.classList.contains("tabs-top")?(D=!0,A+=I):R.parentNode.classList.contains("tabs-bottom")&&(w=!0)),g=C.querySelector(".bar-subheader"),g&&(M=g.offsetHeight,A+=M),x=2*A,O=$=k=x,I=I||0,M=M||0,u.scrollSista){case"header":k=v,$=D?v:0;break;case"header-tabs":F=D?I:0,k=D?v+I:v;break;case"tabs-subheader":O=0,F=D?A-v:M,U=D?M:0;break;case"tabs":O=0,k=D?I:0;break;case"subheader":O=0,$=0;break;default:F=D?A-v:M,U=D?M:0}}function b(a,n){var o=1-a/v;d(T,a,n),e.forEach(T.children,function(e){e.style.opacity=o,s&&(e.style[t.CSS.TRANSFORM]="scale("+o+","+o+")")}),d(N,a,n)}function h(e,a){var n,o,r=l[0].style,i=e>F?e-F:0;t.requestAnimationFrame(function(){g&&(o=e>_?e-_:0,d(g,Math.min(k,o),a)),R&&(n=Math.min($,e>U?e-U:0),w&&(n=-n,r.bottom=Math.max(0,I-e)+"px"),d(R,n,a)),b(Math.min(O,i),a),r.top=Math.max(0,A-e)+"px"})}var m,y,p,N,T,v,A,g,M,R,I,x,O,$,k,C=a[0].body,H=u.delegateHandle?o.$getByHandle(u.delegateHandle):o,q=H.getScrollView(),D=!1,w=!1,F=0,U=0,_=0;f(),r.$on("scroll.refreshComplete",function(){f()}),r.$parent.$on("$ionicView.leave",function(){var e=l[0].style.top;e&&e!==A+"px"&&(h(0),f())}),l.bind("scroll",function(e){N&&T||S();var t=0,a=e.detail.scrollTop;m=a>=0?Math.min(x,Math.max(0,m+a-p)):0,q.getScrollMax().top-a<=A&&(m=0,t=c),p=a,y!==m&&(y=m,h(m,t))})}}}])}(angular,ionic);